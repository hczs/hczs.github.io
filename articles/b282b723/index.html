<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5"><meta name="description" content="由于官方文档过于简洁，所以记一下 CAMEL-AI 多智能体框架使用笔记，包括基础 Agent 使用（Prompt、Message、Memory、Tool），role-playing（角色扮演）使用、Workforce（多智能体协作）使用、RAG"><meta property="og:type" content="article"><meta property="og:title" content="CAMEL-AI 使用笔记"><meta property="og:url" content="https://www.powercheng.fun/articles/b282b723/index.html"><meta property="og:site_name" content="Caiden&#39;s Blog"><meta property="og:description" content="由于官方文档过于简洁，所以记一下 CAMEL-AI 多智能体框架使用笔记，包括基础 Agent 使用（Prompt、Message、Memory、Tool），role-playing（角色扮演）使用、Workforce（多智能体协作）使用、RAG"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.powercheng.fun/articles/b282b723/Wechat-IMG1592.jpg"><meta property="article:published_time" content="2025-07-06T10:45:58.000Z"><meta property="article:modified_time" content="2025-11-19T03:04:36.680Z"><meta property="article:author" content="Caiden Hou"><meta property="article:tag" content="agent"><meta property="article:tag" content="multi-agent"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.powercheng.fun/articles/b282b723/Wechat-IMG1592.jpg"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="stylesheet" href="https://gw.alipayobjects.com/os/k/font/lxgwwenkaiscreenr.css"><title>CAMEL-AI 使用笔记</title><link rel="stylesheet" href="/css/style.css"><link rel="alternate" href="/true" title="Caiden&#39;s Blog" type="application/atom+xml"><meta name="generator" content="Hexo 5.4.0"></head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#" aria-label="目录"><i class="fa-solid fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" aria-label="顶部" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fa-solid fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">首页</a></li><li><a href="/archives/">文章</a></li><li><a href="/categories/">分类</a></li><li><a href="/search/">搜索</a></li><li><a href="/about/">关于</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" aria-label="上一篇" href="/articles/42bb0f/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" aria-label="下一篇" href="/articles/e8acd9b1/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" aria-label="返回顶部" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" aria-label="分享文章" href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">上一篇</span> <span id="i-next" class="info" style="display:none">下一篇</span> <span id="i-top" class="info" style="display:none">返回顶部</span> <span id="i-share" class="info" style="display:none">分享文章</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.facebook.com/sharer.php?u=https://www.powercheng.fun/articles/b282b723/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://twitter.com/share?url=https://www.powercheng.fun/articles/b282b723/&text=CAMEL-AI 使用笔记"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.linkedin.com/shareArticle?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.powercheng.fun/articles/b282b723/&is_video=false&description=CAMEL-AI 使用笔记"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=CAMEL-AI 使用笔记&body=Check out this article: https://www.powercheng.fun/articles/b282b723/" rel="external nofollow noreferrer"><i class="fa-solid fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://getpocket.com/save?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://reddit.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.stumbleupon.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://digg.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" href="http://www.tumblr.com/share/link?url=https://www.powercheng.fun/articles/b282b723/&name=CAMEL-AI 使用笔记&description=&lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&#34; /&gt;&lt;div class=&#34;.article-gallery&#34;&gt;&lt;p&gt;由于官方文档过于简洁，所以记一下 CAMEL-AI 多智能体框架使用笔记，包括基础 Agent 使用（Prompt、Message、Memory、Tool），role-playing（角色扮演）使用、Workforce（多智能体协作）使用、RAG&lt;/p&gt;"><i class="fab fa-tumblr" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://news.ycombinator.com/submitlink?u=https://www.powercheng.fun/articles/b282b723/&t=CAMEL-AI 使用笔记"><i class="fab fa-hacker-news" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-CAMEL-AI-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">1. CAMEL-AI 介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Agent-%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">2. Agent 基础组件及使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Models"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Models</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Message"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Message</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Prompt"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 Prompt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Memory"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Memory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-Tool"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 Tool</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1 自定义工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E9%A2%84%E8%AE%BE%E5%B7%A5%E5%85%B7"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2 预设工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E7%BB%BC%E5%90%88%E4%BD%BF%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 综合使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">3. 核心特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-RolePlaying"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 RolePlaying</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Workforce"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Workforce</span></a></li></ol></li></ol></div></span></div><div class="content index py4"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle p-name" itemprop="name headline">CAMEL-AI 使用笔记</h1><div class="meta"><div class="postdate"><time datetime="2025-07-06T10:45:58.000Z" class="dt-published" itemprop="datePublished">2025-07-06</time> (Updated: <time datetime="2025-11-19T03:04:36.680Z" class="dt-updated" itemprop="dateModified">2025-11-19</time>)</div><div class="article-category"><i class="fa-solid fa-archive"></i> <a class="category-link" href="/categories/AI/">AI</a></div><div class="article-tag"><i class="fa-solid fa-tag"></i> <a class="p-category" href="/tags/agent/" rel="tag">agent</a>, <a class="p-category" href="/tags/multi-agent/" rel="tag">multi-agent</a></div></div></header><div class="content e-content" itemprop="articleBody"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css"><div class=".article-gallery"><p>由于官方文档过于简洁，所以记一下 CAMEL-AI 多智能体框架使用笔记，包括基础 Agent 使用（Prompt、Message、Memory、Tool），role-playing（角色扮演）使用、Workforce（多智能体协作）使用、RAG</p><span id="more"></span><h1 id="1-CAMEL-AI-介绍"><a href="#1-CAMEL-AI-介绍" class="headerlink" title="1. CAMEL-AI 介绍"></a>1. CAMEL-AI 介绍</h1><p>官网是这么介绍的：</p><blockquote><p><strong>CAMEL‑AI is an open‑source, modular framework for building intelligent multi‑agent systems.</strong></p><p><strong>CAMEL-AI 是一个开源的模块化框架，用于构建智能多智能体系统。</strong></p></blockquote><p>可以看到这个框架主打的是多智能体，我也是很看好多智能体的发展，多智能体可以分工合作，像团队成员一样协作完成复杂任务，每个智能体专注于一个子任务，相对来说对模型性能要求会低一些，而且可以并行跑（对于没有依赖的子任务）。</p><p>因为有一些复杂场景很难靠一个“超级智能体”解决，多智能体系统更现实而且更稳定和灵活。</p><h1 id="2-Agent-基础组件及使用"><a href="#2-Agent-基础组件及使用" class="headerlink" title="2. Agent 基础组件及使用"></a>2. Agent 基础组件及使用</h1><p>Agent 是可以感知环境并在环境中自主行动以实现特定目标的系统。</p><p>当我们创建 Agent 时，需要关心以下几部分：</p><ol><li>Models：Agent 的大脑，负责处理输入数据和输出数据</li><li>Message：Agent 和外界的通信方式，都通过 Message 来通信</li><li>Prompt：定义 Agent 身份的重要手段，通过 Prompt 可以定义 Agent 的角色以及约束 Agent 的输出结构等等</li><li>Memory：Agent 的关键组件，主要功能是存储和检索信息，达到“人脑”的效果，agent 可以根据过去的经验进行推理和决策</li><li>Tools：这个是 Agent 操作外部世界的桥梁，通过 Tools， Agent 真正的对外部世界进行实际影响，比如说创建文件、网络搜索等等</li></ol><p>下面就依次介绍这些组件的使用，最后完成一个使用到所有组件的 Agent</p><h2 id="2-1-Models"><a href="#2-1-Models" class="headerlink" title="2.1 Models"></a>2.1 Models</h2><p>创建模型是通过模型工厂类来创建</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">    model_config_dict=&#123;<span class="string">&quot;temperature&quot;</span>: <span class="number">0.2</span>, <span class="string">&quot;max_tokens&quot;</span>: <span class="number">4096</span>&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>主要是这么几个参数：</p><ul><li>model_platform：模型所属平台，类似于 LangChain 里面的 provider</li><li>model_type：具体的模型名称</li><li>url：如果用的是 OPENAI_COMPATIBLE_MODEL 这种 OpenAI API 兼容的模型平台，需要自己定义 url</li><li>api_key：从平台申请的 api key</li><li>model_config_dict：这个可以添加模型的额外配置参数</li></ul><h2 id="2-2-Message"><a href="#2-2-Message" class="headerlink" title="2.2 Message"></a>2.2 Message</h2><p>Agent 与外界沟通都是走的 Message。</p><p>在 CAMEL-AI 中，是基于一个<code>BaseMessage</code> 来通信的</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">message = BaseMessage(</span><br><span class="line">    role_name=<span class="string">&quot;example_user&quot;</span>,</span><br><span class="line">    role_type=RoleType.USER,</span><br><span class="line">    content=<span class="string">&quot;Hello, CAMEL!&quot;</span>,</span><br><span class="line">    meta_dict=&#123;&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>参数：</p><ul><li>role_name：角色名称，这个通过角色名称来看消息来源的，debug 方便</li><li>role_type：真正觉得消息所属角色，RoleType.USER 和 RoleType.ASSISTANT</li><li>content：消息内容，一般是文本</li><li>meta_dict：消息元数据</li></ul><p>多模态消息：比如我们想要发送给 llm 图片或者视频，怎么发送呢？总不能发送 content 吧，下面消息也可以是多模态的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># send image</span></span><br><span class="line"><span class="comment"># 下载一张图片并创建一个 PIL Image 对象</span></span><br><span class="line">url = <span class="string">&quot;https://raw.githubusercontent.com/camel-ai/camel/master/misc/logo_light.png&quot;</span></span><br><span class="line">response = requests.get(url)</span><br><span class="line">img = Image.<span class="built_in">open</span>(BytesIO(response.content))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建包含图片的用户消息</span></span><br><span class="line">image_message = BaseMessage(</span><br><span class="line">    role_name=<span class="string">&quot;User_with_image&quot;</span>,</span><br><span class="line">    role_type=RoleType.USER,</span><br><span class="line">    content=<span class="string">&quot;Here is an image&quot;</span>,</span><br><span class="line">    meta_dict=&#123;&#125;,</span><br><span class="line">    image_list=[img]  <span class="comment"># 将图片列表作为参数传入</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(image_message)</span><br><span class="line"></span><br><span class="line"><span class="comment"># send video</span></span><br><span class="line"><span class="comment"># 读取本地视频文件</span></span><br><span class="line">video_path = <span class="string">&quot;./data/video.mp4&quot;</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(video_path, <span class="string">&quot;rb&quot;</span>) <span class="keyword">as</span> video_file:</span><br><span class="line">    video_bytes = video_file.read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建包含视频的用户消息  make_user_message 可以不用指定 role type 了，直接创建用户消息</span></span><br><span class="line">user_msg = BaseMessage.make_user_message(</span><br><span class="line">    role_name=<span class="string">&quot;User&quot;</span>,</span><br><span class="line">    content=<span class="string">&quot;请描述这段视频的内容&quot;</span>,</span><br><span class="line">    video_bytes=video_bytes,  <span class="comment"># 将视频字节作为参数传入</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>每次指定 role type 很麻烦，所以也有直接创建指定角色消息的方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户消息</span></span><br><span class="line">user_msg = BaseMessage.make_user_message(</span><br><span class="line">    role_name=<span class="string">&quot;User_1&quot;</span>,</span><br><span class="line">    content=<span class="string">&quot;Hi, what can you do?&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建助手消息</span></span><br><span class="line">assistant_msg = BaseMessage.make_assistant_message(</span><br><span class="line">    role_name=<span class="string">&quot;Assistant_1&quot;</span>,</span><br><span class="line">    content=<span class="string">&quot;I can help you with various tasks.&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="2-3-Prompt"><a href="#2-3-Prompt" class="headerlink" title="2.3 Prompt"></a>2.3 Prompt</h2><p>提示词一般使用就是定义预先写好的设置，然后里面放几个变量，通过实际情况替换后传给 llm 处理。</p><p>基本使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 也可以像langchain一样，自定义prompt模版</span></span><br><span class="line">prompt = TextPrompt(<span class="string">&quot;你好，我的名字是&#123;user_name&#125;，我来自&#123;user_location&#125;，请问你是谁？&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(prompt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以打印参数列表</span></span><br><span class="line"><span class="built_in">print</span>(prompt.key_words)</span><br><span class="line"><span class="comment"># 可以全部赋值</span></span><br><span class="line"><span class="built_in">print</span>(prompt.<span class="built_in">format</span>(user_name=<span class="string">&quot;小明&quot;</span>, user_location=<span class="string">&quot;北京&quot;</span>))</span><br><span class="line"><span class="comment"># 也可以部分赋值</span></span><br><span class="line"><span class="built_in">print</span>(prompt.<span class="built_in">format</span>(user_name=<span class="string">&quot;小明&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">你好，我的名字是&#123;user_name&#125;，我来自&#123;user_location&#125;，请问你是谁？</span><br><span class="line">&#123;<span class="string">&#x27;user_location&#x27;</span>, <span class="string">&#x27;user_name&#x27;</span>&#125;</span><br><span class="line">你好，我的名字是小明，我来自北京，请问你是谁？</span><br><span class="line">你好，我的名字是小明，我来自&#123;user_location&#125;，请问你是谁？</span><br></pre></td></tr></table></figure><p>提示词优化：</p><p>一般来说，用户给的提示词不会那么的正规，所以程序里要对用户的提示词进行一些优化更好的完成任务，最常用的就是思维链的思路，把目标任务进行拆解，然后给llm思考执行，比直接给llm目标任务要容易完成的多，下面是思维链的使用方式：</p><p>主要是用框架里的<code>TaskSpecifyAgent</code> 这个agent进行提示词的优化工作：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提示词自动优化，就是让任务更加的确切</span></span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> TaskSpecifyAgent</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> TaskType</span><br><span class="line"></span><br><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">task_specify_agent = TaskSpecifyAgent(</span><br><span class="line">    model=model, task_type=TaskType.AI_SOCIETY, output_language=<span class="string">&quot;zh-cn&quot;</span></span><br><span class="line">)</span><br><span class="line">cot_prompt = task_specify_agent.run(</span><br><span class="line">    task_prompt=<span class="string">&quot;如何开发一个支持高并发的程序？&quot;</span>,</span><br><span class="line">    meta_dict=<span class="built_in">dict</span>(assistant_role=<span class="string">&quot;架构师&quot;</span>, user_role=<span class="string">&quot;开发者&quot;</span>),</span><br><span class="line">)</span><br><span class="line">cot_prompt</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="string">&#x27;如何设计并实现一个能够处理每秒10万次请求的高并发Web应用程序，确保低延迟和高可用性？&#x27;</span></span><br><span class="line"></span><br><span class="line">----------------------------</span><br><span class="line"><span class="comment">## 自定义prompt</span></span><br><span class="line"><span class="keyword">from</span> camel.prompts <span class="keyword">import</span> TextPrompt</span><br><span class="line"></span><br><span class="line">  custom_prompt = TextPrompt(</span><br><span class="line">      <span class="string">&quot;这是一个任务：我是一名&#123;occupation&#125;，我想完成的任务是：&#123;task&#125;，请你制定完成这个任务所需的任务步骤！&quot;</span></span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">custom_specify_agent = TaskSpecifyAgent(</span><br><span class="line">    model=model, output_language=<span class="string">&quot;zh-cn&quot;</span>, task_specify_prompt=custom_prompt</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response = custom_specify_agent.run(</span><br><span class="line">    task_prompt=<span class="string">&quot;如何开发一个支持高并发的程序？&quot;</span>,</span><br><span class="line">    meta_dict=<span class="built_in">dict</span>(occupation=<span class="string">&quot;初级程序员&quot;</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line"><span class="string">&#x27;要成为一名能够开发支持高并发程序的初级程序员，你可以按照以下步骤来逐步提升自己的技能和知识：\n\n1. **理解高并发的基本概念**：\n   - 学习什么是并发和并行。\n   - 了解高并发系统的特点及挑战，如锁争用、内存溢出等。\n\n2. **掌握一门或多门编程语言**：\n   - 选择一门适合开发高并发应用的语言，如Java、Go或Python。\n   - 深入学习这门语言的并发模型和多线程处理机制。\n\n3. **学习并发控制技术**：\n   - 理解同步与异步的概念。\n   - 掌握常见的并发控制工具和技术，例如互斥锁（Mutex）、信号量（Semaphore）、条件变量（Condition Variable）等。\n\n4. **研究高并发框架和库**：\n   - 探索一些流行的高并发处理框架，如Netty、Akka等。\n   - 学习使用这些框架来简化并发编程。\n\n5. **性能优化技巧**：\n   - 学习如何进行代码层面的优化，比如减少锁的竞争。\n   - 了解硬件层面的知识，如CPU缓存的工作原理，以优化数据访问模式。\n\n6. **实践项目经验**：\n   - 尝试参与或自己动手实现一些小规模的并发项目。\n   - 分析现有高并发系统的架构设计，理解其背后的原理。\n\n7. **测试与调试**：\n   - 学会编写单元测试和集成测试，确保并发逻辑正确无误。\n   - 使用专业的工具进行压力测试，模拟高负载情况下的系统表现。\n\n8. **持续学习和跟进新技术**：\n   - 关注行业动态和技术论坛，了解最新的并发处理技术和趋势。\n   - 不断实践新的想法和技术，保持技术的前沿性。\n\n通过上述步骤的学习和实践，你将逐渐建立起开发高效、稳定高并发应用程序的能力。每一步都需要时间和耐心去探索和实践，但只要你坚持不懈，最终定能达成目标。&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="2-4-Memory"><a href="#2-4-Memory" class="headerlink" title="2.4 Memory"></a>2.4 Memory</h2><p>个人认为，记忆里面，CAMEL 最方便使用的就是 LongtermAgentMemory 这个长期 Agent 记忆组件，它可以通过对话记录+向量数据库中获取上下文，最大程度不丢失记忆：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> OpenAICompatibleEmbedding</span><br><span class="line"><span class="keyword">from</span> camel.memories <span class="keyword">import</span> (</span><br><span class="line">    ChatHistoryBlock,</span><br><span class="line">    LongtermAgentMemory,</span><br><span class="line">    MemoryRecord,</span><br><span class="line">    ScoreBasedContextCreator,</span><br><span class="line">    VectorDBBlock,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelType, OpenAIBackendRole</span><br><span class="line"><span class="keyword">from</span> camel.utils <span class="keyword">import</span> OpenAITokenCounter</span><br><span class="line"></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">siliconflow_api_key = os.getenv(<span class="string">&quot;SILICONFLOW_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 嵌入模型 用国内的硅基流动 兼容OpenAI的格式 不占用本地资源</span></span><br><span class="line">embedding = OpenAICompatibleEmbedding(</span><br><span class="line">    model_type=<span class="string">&quot;BAAI/bge-m3&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api.siliconflow.cn/v1&quot;</span>,</span><br><span class="line">    api_key=siliconflow_api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 必须需要先调用embed_list方法来确定输出维度</span></span><br><span class="line">embedding.embed_list([<span class="string">&quot;Hello, world!&quot;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化基于内存的记忆</span></span><br><span class="line"><span class="comment"># 三部分</span></span><br><span class="line"><span class="comment"># 1. context 从 chat_history 获取上下文，由于模型有输入token的限制，所以会有一个权重衰减策略</span></span><br><span class="line"><span class="comment"># 2. chat_history_block 基于kv的聊天历史记忆模块</span></span><br><span class="line"><span class="comment"># 3. vector_db_block 基于向量数据库的语义记忆模块</span></span><br><span class="line">chat_history_block = ChatHistoryBlock()</span><br><span class="line">vector_db_block = VectorDBBlock(embedding=embedding)</span><br><span class="line">memory = LongtermAgentMemory(</span><br><span class="line">    context_creator=ScoreBasedContextCreator(</span><br><span class="line">        token_counter=OpenAITokenCounter(ModelType.GPT_4O_MINI),</span><br><span class="line">        token_limit=<span class="number">1024</span>,</span><br><span class="line">    ),</span><br><span class="line">    chat_history_block=chat_history_block,</span><br><span class="line">    vector_db_block=vector_db_block,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. 创建记忆记录</span></span><br><span class="line">records = [</span><br><span class="line">    MemoryRecord(</span><br><span class="line">        message=BaseMessage.make_user_message(</span><br><span class="line">            role_name=<span class="string">&quot;User&quot;</span>, content=<span class="string">&quot;什么是CAMEL AI?&quot;</span></span><br><span class="line">        ),</span><br><span class="line">        role_at_backend=OpenAIBackendRole.USER,</span><br><span class="line">    ),</span><br><span class="line">    MemoryRecord(</span><br><span class="line">        message=BaseMessage.make_assistant_message(</span><br><span class="line">            role_name=<span class="string">&quot;Agent&quot;</span>,</span><br><span class="line">            content=<span class="string">&quot;CAMEL-AI是第一个LLM多智能体框架,并且是一个致力于寻找智能体 scaling law 的开源社区。&quot;</span>,</span><br><span class="line">        ),</span><br><span class="line">        role_at_backend=OpenAIBackendRole.ASSISTANT,</span><br><span class="line">    ),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写入记忆</span></span><br><span class="line">memory.write_records(records)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会同时写入到 chat_history_block + vector 向量库</span></span><br><span class="line">recent_records = chat_history_block.retrieve(window_size=<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> recent_records:</span><br><span class="line">    <span class="built_in">print</span>(</span><br><span class="line">        <span class="string">f&quot;ChatHistoryBlock 消息: <span class="subst">&#123;record.memory_record.message.content&#125;</span>, 权重: <span class="subst">&#123;record.score&#125;</span>&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">vector_records = vector_db_block.retrieve(keyword=<span class="string">&quot;CAMEL AI?&quot;</span>, limit=<span class="number">3</span>)</span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> vector_records:</span><br><span class="line">    <span class="built_in">print</span>(</span><br><span class="line">        <span class="string">f&quot;VectorBlock 消息: <span class="subst">&#123;record.memory_record.message.content&#125;</span>, 权重: <span class="subst">&#123;record.score&#125;</span>&quot;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">context, token_count = memory.get_context()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Context: <span class="subst">&#123;context&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Token Count: <span class="subst">&#123;token_count&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">ChatHistoryBlock 消息: 什么是CAMEL AI?, 权重: <span class="number">0.81</span></span><br><span class="line">ChatHistoryBlock 消息: CAMEL-AI是第一个LLM多智能体框架,并且是一个致力于寻找智能体 scaling law 的开源社区。, 权重: <span class="number">0.9</span></span><br><span class="line">VectorBlock 消息: 什么是CAMEL AI?, 权重: <span class="number">0.8989381070891671</span></span><br><span class="line">VectorBlock 消息: CAMEL-AI是第一个LLM多智能体框架,并且是一个致力于寻找智能体 scaling law 的开源社区。, 权重: <span class="number">0.682588891918595</span></span><br><span class="line">Context: [&#123;<span class="string">&#x27;role&#x27;</span>: <span class="string">&#x27;user&#x27;</span>, <span class="string">&#x27;content&#x27;</span>: <span class="string">&#x27;什么是CAMEL AI?&#x27;</span>&#125;, &#123;<span class="string">&#x27;role&#x27;</span>: <span class="string">&#x27;assistant&#x27;</span>, <span class="string">&#x27;content&#x27;</span>: <span class="string">&#x27;CAMEL-AI是第一个LLM多智能体框架,并且是一个致力于寻找智能体 scaling law 的开源社区。&#x27;</span>&#125;]</span><br><span class="line">Token Count: <span class="number">52</span></span><br></pre></td></tr></table></figure><p>LongtermAgentMemory 有三个关键参数：</p><ul><li>context_creator：创建context的对象，memory.get_context() 会直接这么获取最近的记忆信息给 llm，就是这个 creator 创建的</li><li>chat_history_block：基于kv的聊天历史记忆模块，存储的是原始聊天记录文本</li><li>vector_db_block：基于向量库的向量存储模块，存储的是嵌入向量</li></ul><p>使用效果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">agent = ChatAgent(</span><br><span class="line">    model=model,</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">    system_message=<span class="string">&quot;你是一个AI助手，你的任务是帮助用户完成任务&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以先注释 再打开 看看加不加记忆的区别</span></span><br><span class="line">agent.memory = memory</span><br><span class="line"></span><br><span class="line">response = agent.step(<span class="string">&quot;我们刚刚说的什么来着？&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(response.msgs[<span class="number">0</span>].content)</span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">我们刚才讨论了CAMEL AI，它是第一个大型语言模型（LLM）多智能体框架，并且是一个致力于寻找智能体扩展定律（scaling law）的开源社区。这个框架允许不同的AI智能体相互协作和竞争，以完成复杂任务或探索新的应用场景。如果您有更多关于CAMEL AI的问题或需要进一步的信息，请随时告诉我！</span><br></pre></td></tr></table></figure><h2 id="2-5-Tool"><a href="#2-5-Tool" class="headerlink" title="2.5 Tool"></a>2.5 Tool</h2><p>工具有框架的预设工具，也可以自己自定义工具</p><h3 id="2-5-1-自定义工具"><a href="#2-5-1-自定义工具" class="headerlink" title="2.5.1 自定义工具"></a>2.5.1 自定义工具</h3><p>自定义工具，其实就是写一个方法（一定要注意注释要写好点，llm调用工具全靠注释），然后用FunctionTool包装一下这个自定义方法，就做好工具了，可以直接给 Agent 使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关于工具的定义、初始化、以及给agent调用</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> FunctionTool</span><br><span class="line"></span><br><span class="line">agent = ChatAgent(</span><br><span class="line">    model=model,</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">    system_message=<span class="string">&quot;你是一个AI女仆，你的任务是帮助主人完成任务&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response = agent.step(<span class="string">&quot;2的平方根是多少？&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不带工具，精度不会很精确：2的平方根大约是1.414。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;不带工具：<span class="subst">&#123;response.msgs[<span class="number">0</span>].content&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义一个算平方根的工具</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sqrt_function</span>(<span class="params">x: <span class="built_in">float</span></span>) -&gt; <span class="built_in">float</span>:</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;计算一个数的平方根。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        x (float): 需要计算平方根的数字</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    Returns:</span></span><br><span class="line"><span class="string">        float: 平方根计算结果</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> math.sqrt(x)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用工具包装一下</span></span><br><span class="line">sqrt_tool = FunctionTool(sqrt_function)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打印一下工具的参数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;工具名称: <span class="subst">&#123;sqrt_tool.get_function_name()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;工具描述: <span class="subst">&#123;sqrt_tool.get_function_description()&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;工具参数: <span class="subst">&#123;sqrt_tool.get_openai_function_schema()&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化一个带代理的工具</span></span><br><span class="line">agent = ChatAgent(</span><br><span class="line">    model=model,</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">    system_message=<span class="string">&quot;你是一个AI女仆，你的任务是帮助主人完成任务&quot;</span>,</span><br><span class="line">    tools=[sqrt_tool],  <span class="comment"># 将工具添加到代理中</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 现在再次调用代理</span></span><br><span class="line">response = agent.step(<span class="string">&quot;2的平方根是多少？&quot;</span>)</span><br><span class="line"><span class="comment"># 带工具，精度会更高</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;带工具：<span class="subst">&#123;response.msgs[<span class="number">0</span>].content&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># output</span></span><br><span class="line">不带工具：<span class="number">2</span>的平方根大约是<span class="number">1.414</span>。</span><br><span class="line">工具名称: sqrt_function</span><br><span class="line">工具描述: 计算一个数的平方根。</span><br><span class="line">工具参数: &#123;<span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;sqrt_function&#x27;</span>, <span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;计算一个数的平方根。&#x27;</span>, <span class="string">&#x27;strict&#x27;</span>: <span class="literal">True</span>, <span class="string">&#x27;parameters&#x27;</span>: &#123;<span class="string">&#x27;properties&#x27;</span>: &#123;<span class="string">&#x27;x&#x27;</span>: &#123;<span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;number&#x27;</span>, <span class="string">&#x27;description&#x27;</span>: <span class="string">&#x27;需要计算平方根的数字&#x27;</span>&#125;&#125;, <span class="string">&#x27;required&#x27;</span>: [<span class="string">&#x27;x&#x27;</span>], <span class="string">&#x27;type&#x27;</span>: <span class="string">&#x27;object&#x27;</span>, <span class="string">&#x27;additionalProperties&#x27;</span>: <span class="literal">False</span>&#125;&#125;</span><br><span class="line">带工具：<span class="number">2</span>的平方根是<span class="number">1.4142135623730951</span>。</span><br></pre></td></tr></table></figure><h3 id="2-5-2-预设工具"><a href="#2-5-2-预设工具" class="headerlink" title="2.5.2 预设工具"></a>2.5.2 预设工具</h3><p>CAMEL 预设了一些工具，可以查看<code>camel.toolkits</code> 这个包里面，都是预设的工具，下面是用维基百科工具演示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.societies <span class="keyword">import</span> RolePlaying</span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> MathToolkit, SearchToolkit</span><br><span class="line"><span class="keyword">from</span> camel.types.agents <span class="keyword">import</span> ToolCallingRecord</span><br><span class="line"><span class="keyword">from</span> camel.utils <span class="keyword">import</span> print_text_animated</span><br><span class="line"><span class="keyword">from</span> colorama <span class="keyword">import</span> Fore</span><br><span class="line"></span><br><span class="line"><span class="comment"># init search and math toolkits</span></span><br><span class="line">tools_list = [*SearchToolkit().get_tools(), *MathToolkit().get_tools()]</span><br><span class="line"></span><br><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">agent = ChatAgent(model=model, tools=tools_list, output_language=<span class="string">&quot;zh-cn&quot;</span>)</span><br><span class="line"></span><br><span class="line">response = agent.step(</span><br><span class="line">    input_message=<span class="string">&quot;用维基百科查查牛津大学是什么时候成立的，有没有准确的成立日期呢？&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">response</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出 可以在 response 中看到 ToolCallingRecord 就是工具的调用记录，调用了 search_wiki 工具</span></span><br><span class="line">ChatAgentResponse(msgs=[BaseMessage(role_name=<span class="string">&#x27;Assistant&#x27;</span>, role_type=&lt;RoleType.ASSISTANT: <span class="string">&#x27;assistant&#x27;</span>&gt;, meta_dict=&#123;&#125;, content=<span class="string">&#x27;牛津大学是位于英格兰牛津的一所学院研究型大学。有记录显示，早在1096年这里就有教学活动，这使得牛津大学成为英语世界中最古老的大学，也是全球第二古老的持续运营的大学。1167年，亨利二世禁止英国学生前往巴黎大学就读，此后牛津大学迅速扩大。当学生与牛津镇民发生纠纷时，一些牛津学者逃到了东北方向的剑桥，在那里于1209年建立了剑桥大学。两所英国古老大学有许多共同点，通常被统称为“牛桥”。\n\n不过关于具体的成立日期，牛津大学并没有一个确切的成立日，因为它是逐步发展起来的。但通常认为1096年左右是其开始教学的时间。&#x27;</span>, video_bytes=<span class="literal">None</span>, image_list=<span class="literal">None</span>, image_detail=<span class="string">&#x27;auto&#x27;</span>, video_detail=<span class="string">&#x27;low&#x27;</span>, parsed=<span class="literal">None</span>)], terminated=<span class="literal">False</span>, info=&#123;<span class="string">&#x27;id&#x27;</span>: <span class="string">&#x27;chatcmpl-6f91ae30-20bd-9100-9920-1abb591844fc&#x27;</span>, <span class="string">&#x27;usage&#x27;</span>: &#123;<span class="string">&#x27;completion_tokens&#x27;</span>: <span class="number">168</span>, <span class="string">&#x27;prompt_tokens&#x27;</span>: <span class="number">3617</span>, <span class="string">&#x27;total_tokens&#x27;</span>: <span class="number">3785</span>, <span class="string">&#x27;completion_tokens_details&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;prompt_tokens_details&#x27;</span>: <span class="literal">None</span>&#125;, <span class="string">&#x27;termination_reasons&#x27;</span>: [<span class="string">&#x27;stop&#x27;</span>], <span class="string">&#x27;num_tokens&#x27;</span>: <span class="number">248</span>, <span class="string">&#x27;tool_calls&#x27;</span>: [ToolCallingRecord(tool_name=<span class="string">&#x27;search_wiki&#x27;</span>, args=&#123;<span class="string">&#x27;entity&#x27;</span>: <span class="string">&#x27;牛津大学&#x27;</span>&#125;, result=<span class="string">&#x27;There is no page in Wikipedia corresponding to entity 牛津大学, please specify another word to describe the entity to be searched.&#x27;</span>, tool_call_id=<span class="string">&#x27;call_62d33f3b17094cd9bcc606&#x27;</span>), ToolCallingRecord(tool_name=<span class="string">&#x27;search_wiki&#x27;</span>, args=&#123;<span class="string">&#x27;entity&#x27;</span>: <span class="string">&#x27;University of Oxford&#x27;</span>&#125;, result=<span class="string">&#x27;The University of Oxford is a collegiate research university in Oxford, England. There is evidence of teaching as early as 1096, making it the oldest university in the English-speaking world and the second-oldest continuously operating university globally. It expanded rapidly from 1167, when Henry II prohibited English students from attending the University of Paris. When disputes erupted between students and the Oxford townspeople, some Oxford academics fled northeast to Cambridge, where they established the University of Cambridge in 1209. The two English ancient universities share many common features and are jointly referred to as Oxbridge.&#x27;</span>, tool_call_id=<span class="string">&#x27;call_9f4558bd25af46338c9f15&#x27;</span>)], <span class="string">&#x27;external_tool_call_requests&#x27;</span>: <span class="literal">None</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="2-6-综合使用"><a href="#2-6-综合使用" class="headerlink" title="2.6 综合使用"></a>2.6 综合使用</h2><p>写一个可以多轮对话的 agent demo，并且可以进行维基百科搜索，也有记忆功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> ChatAgent, TaskSpecifyAgent</span><br><span class="line"><span class="keyword">from</span> camel.embeddings <span class="keyword">import</span> OpenAICompatibleEmbedding</span><br><span class="line"><span class="keyword">from</span> camel.memories <span class="keyword">import</span> (</span><br><span class="line">    ChatHistoryBlock,</span><br><span class="line">    LongtermAgentMemory,</span><br><span class="line">    ScoreBasedContextCreator,</span><br><span class="line">    VectorDBBlock,</span><br><span class="line">)</span><br><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> BaseModelBackend, ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.prompts <span class="keyword">import</span> TextPrompt</span><br><span class="line"><span class="keyword">from</span> camel.responses <span class="keyword">import</span> ChatAgentResponse</span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> FunctionTool, SearchToolkit</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType, ModelType, TaskType</span><br><span class="line"><span class="keyword">from</span> camel.utils <span class="keyword">import</span> OpenAITokenCounter</span><br><span class="line"><span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv</span><br><span class="line"></span><br><span class="line">load_dotenv()</span><br><span class="line"></span><br><span class="line">modelscope_api_key: <span class="built_in">str</span> | <span class="literal">None</span> = os.getenv(<span class="string">&quot;MODELSCOPE_SDK_TOKEN&quot;</span>)</span><br><span class="line">siliconflow_api_key: <span class="built_in">str</span> | <span class="literal">None</span> = os.getenv(<span class="string">&quot;SILICONFLOW_API_KEY&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">model: BaseModelBackend = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=modelscope_api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># prompt specify</span></span><br><span class="line">custom_specify_agent: TaskSpecifyAgent = TaskSpecifyAgent(</span><br><span class="line">    model=model, output_language=<span class="string">&quot;zh-cn&quot;</span>, task_type=TaskType.AI_SOCIETY</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># define memory</span></span><br><span class="line">embedding: OpenAICompatibleEmbedding = OpenAICompatibleEmbedding(</span><br><span class="line">    model_type=<span class="string">&quot;BAAI/bge-m3&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api.siliconflow.cn/v1&quot;</span>,</span><br><span class="line">    api_key=siliconflow_api_key,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 必须需要先调用embed_list方法来确定输出维度</span></span><br><span class="line">embedding.embed_list([<span class="string">&quot;Hello, world!&quot;</span>])</span><br><span class="line">chat_history_block = ChatHistoryBlock()</span><br><span class="line">vector_db_block = VectorDBBlock(embedding=embedding)</span><br><span class="line">memory = LongtermAgentMemory(</span><br><span class="line">    context_creator=ScoreBasedContextCreator(</span><br><span class="line">        token_counter=OpenAITokenCounter(ModelType.GPT_4O_MINI),</span><br><span class="line">        token_limit=<span class="number">1024</span>,</span><br><span class="line">    ),</span><br><span class="line">    chat_history_block=chat_history_block,</span><br><span class="line">    vector_db_block=vector_db_block,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># tool</span></span><br><span class="line">search_toolkit = SearchToolkit()</span><br><span class="line">tool_list: <span class="built_in">list</span>[FunctionTool] = [</span><br><span class="line">    FunctionTool(search_toolkit.search_wiki),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># agent 指定 model tool memory</span></span><br><span class="line">agent: ChatAgent = ChatAgent(</span><br><span class="line">    model=model, output_language=<span class="string">&quot;zh-cn&quot;</span>, tools=tool_list, memory=memory</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>() -&gt; <span class="literal">None</span>:</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;请输入内容，输入 &#x27;exit&#x27; 退出。&quot;</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        user_input = <span class="built_in">input</span>(<span class="string">&quot;你：&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> user_input.strip().lower() == <span class="string">&quot;exit&quot;</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;已退出。&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="comment"># 提示词优化</span></span><br><span class="line">        prompt_response: TextPrompt = custom_specify_agent.run(user_input)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;优化后的提示词：<span class="subst">&#123;prompt_response&#125;</span>&quot;</span>)</span><br><span class="line">        response: ChatAgentResponse = agent.step(prompt_response)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;助手：&quot;</span>, response.msg.content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h1 id="3-核心特性"><a href="#3-核心特性" class="headerlink" title="3. 核心特性"></a>3. 核心特性</h1><p>上面的功能，一般 LLM 应用框架都会有这些功能，CAMEL 的核心功能就是多个 Agent 之间的相互协调合作的封装，下面是两个很有意思的功能：role-playing 角色扮演 和 workforce 团队合作引擎</p><h2 id="3-1-RolePlaying"><a href="#3-1-RolePlaying" class="headerlink" title="3.1 RolePlaying"></a>3.1 RolePlaying</h2><p>RolePlaying 就是实际用户先提出一个 task，两个 AI，一个 AI 扮演用户，一个 AI 扮演助手，“用户”根据给定task不断的提需求，“助手”就不断的完成，用户AI 不断的判断是否完成 task 要求，通过自动化多轮对话完成我们给出的 task。</p><p>主要用到 RolePlaying 类，下面是几个重要参数：</p><ul><li>task_prompt：我们实际想要完成的任务</li><li>with_task_specify：这个是让我们选择是否需要任务具体化，就是更确切一点的提示词优化</li><li>task_specify_agent_kwargs：提示词优化的 agent 参数</li><li>assistant_role_name：AI 助手的角色名称</li><li>assistant_agent_kwargs：AI 助手的 agent 参数</li><li>user_role_name：AI 用户的角色名称</li><li>user_agent_kwargs：AI 用户的 agent 参数</li><li>critic_role_name：设置为 human，就会在对话过程中让认为参与，选择下一步的动作</li><li>with_critic_in_the_loop：设置为 True 之后，critic_role_name 就会生效，对话支持人为打断功能</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> camel.models <span class="keyword">import</span> ModelFactory</span><br><span class="line"><span class="keyword">from</span> camel.societies <span class="keyword">import</span> RolePlaying</span><br><span class="line"><span class="keyword">from</span> camel.types <span class="keyword">import</span> ModelPlatformType</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化model</span></span><br><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.OPENAI_COMPATIBLE_MODEL,</span><br><span class="line">    model_type=<span class="string">&quot;Qwen/Qwen2.5-72B-Instruct&quot;</span>,</span><br><span class="line">    url=<span class="string">&quot;https://api-inference.modelscope.cn/v1/&quot;</span>,</span><br><span class="line">    api_key=modelscope_api_key,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># role playing 主要配置三类参数</span></span><br><span class="line"><span class="comment"># 1. 要执行什么任务，任务是否需要 specify 就是任务需不需让 AI 描述的更清晰具体</span></span><br><span class="line"><span class="comment"># 2. 执行者 agent的身份、模型配置</span></span><br><span class="line"><span class="comment"># 3. 用户agent的身份、模型配置</span></span><br><span class="line">society = RolePlaying(</span><br><span class="line">    <span class="comment"># task config</span></span><br><span class="line">    task_prompt=<span class="string">&quot;你怎么看待关于 AI 在未来的发展？&quot;</span>,</span><br><span class="line">    with_task_specify=<span class="literal">True</span>,</span><br><span class="line">    task_specify_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">    <span class="comment"># assistant agent config</span></span><br><span class="line">    assistant_role_name=<span class="string">&quot;AI 专家&quot;</span>,</span><br><span class="line">    assistant_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">    <span class="comment"># user agent config</span></span><br><span class="line">    user_role_name=<span class="string">&quot;对 AI 感兴趣的创业者&quot;</span>,</span><br><span class="line">    user_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">    <span class="comment"># 可以在对话中人为选择，人为优先干预</span></span><br><span class="line">    critic_role_name=<span class="string">&quot;human&quot;</span>,</span><br><span class="line">    with_critic_in_the_loop=<span class="literal">True</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化第一条消息</span></span><br><span class="line">input_msg = society.init_chat()</span><br><span class="line"></span><br><span class="line">max_chat = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(max_chat):</span><br><span class="line">    assistant_response, user_response = society.step(input_msg)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> assistant_response.terminated:</span><br><span class="line">        <span class="built_in">print</span>(</span><br><span class="line">            <span class="string">f&quot;助手 agent 已终止，原因：<span class="subst">&#123;assistant_response.info[<span class="string">&#x27;termination_reasons&#x27;</span>]&#125;</span>&quot;</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> user_response.terminated:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;用户 agent 已终止，原因：<span class="subst">&#123;user_response.info[<span class="string">&#x27;termination_reasons&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取执行结果</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;用户 agent 输出内容：<span class="subst">&#123;user_response.msg.content&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;CAMEL_TASK_DONE&quot;</span> <span class="keyword">in</span> user_response.msg.content:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;助手 agent 输出内容：<span class="subst">&#123;assistant_response.msg.content&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    input_msg = assistant_response.msg</span><br></pre></td></tr></table></figure><h2 id="3-2-Workforce"><a href="#3-2-Workforce" class="headerlink" title="3.2 Workforce"></a>3.2 Workforce</h2><p>RolePlaying 只是小打小闹，这个才是真正的多智能体！有三个重要角色：</p><ul><li>协调者 Agent ：项目经理，协调整体任务的把控执行</li><li>任务拆解 Agent：战略主管，将一个大型的作业，拆分为较小的，可行的子任务</li><li>执行者 Agent（可以多个）：打工人，真正做任务的 AI，可以是一个 RolePlaying Agent，每个 Agent 都有自己的功能，比如说 WebSearchAgent，IntentAgent 等等</li></ul><p>用户输入任务 -》 协调者 Agent -》 任务分解者 Agent -》 任务计划 -》 协调者 Agent 根据任务计划分发给不同的执行者 Agent 做</p><p>可以参考下面图片：</p><a href="/articles/b282b723/Wechat-IMG1592.jpg" class="gallery-item"><img src="/articles/b282b723/Wechat-IMG1592.jpg" title="Workforce Architecture Diagram"></a><p>具体 demo, 做一个旅行规划的多 Agent 应用：</p><ol><li>创建 Workforce 实例<ol><li>description：Workforce 描述</li><li>new_worker_agent_kwargs：worker agent 创建的参数</li><li>coordinator_agent_kwargs：协调者 agent 创建参数</li><li>task_agent_kwargs：任务拆解者 agent 参数</li></ol></li><li>创建搜索 agent</li><li>创建做旅行计划的 agent</li><li>创建做攻略评估的 agent</li><li>将这三个 agent 添加到 workforce 作为 worker，添加的时候这个描述一定要精准且易读，因为全靠这个描述选择用哪个 agent</li><li>实例化一个 task</li><li>workforce 执行这个 task</li><li>输出 task 结果</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 简单 demo，做一个旅行规划的多 Agent 应用</span></span><br><span class="line"><span class="keyword">import</span> nest_asyncio</span><br><span class="line"><span class="keyword">from</span> camel.agents <span class="keyword">import</span> ChatAgent</span><br><span class="line"><span class="keyword">from</span> camel.societies.workforce <span class="keyword">import</span> Workforce</span><br><span class="line"><span class="keyword">from</span> camel.tasks <span class="keyword">import</span> Task</span><br><span class="line"><span class="keyword">from</span> camel.toolkits <span class="keyword">import</span> FunctionTool, SearchToolkit</span><br><span class="line"></span><br><span class="line">load_dotenv()</span><br><span class="line">model = ModelFactory.create(</span><br><span class="line">    model_platform=ModelPlatformType.QWEN,</span><br><span class="line">    model_type=<span class="string">&quot;qwen-max&quot;</span>,</span><br><span class="line">    api_key=os.getenv(<span class="string">&quot;BAILIAN_API_KEY&quot;</span>),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建 workforce 实例</span></span><br><span class="line">workforce = Workforce(</span><br><span class="line">    description=<span class="string">&quot;旅游攻略制作与评估工作组&quot;</span>,</span><br><span class="line">    <span class="comment"># 这三个参数不是必须，但是最好明确的自定义 worker 初始化参数 协调者参数 任务拆解者参数</span></span><br><span class="line">    new_worker_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">    coordinator_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">    task_agent_kwargs=<span class="built_in">dict</span>(model=model),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜搜工具</span></span><br><span class="line">search_tool = FunctionTool(SearchToolkit().search_baidu)</span><br><span class="line"><span class="comment"># 搜索 agent</span></span><br><span class="line">search_agent = ChatAgent(</span><br><span class="line">    system_message=<span class="string">&quot;&quot;&quot;你是一个专业的旅游信息搜索助手。你的职责是:</span></span><br><span class="line"><span class="string">                1. 搜索目的地的主要景点信息</span></span><br><span class="line"><span class="string">                2. 搜索当地特色美食信息</span></span><br><span class="line"><span class="string">                3. 搜索交通和住宿相关信息</span></span><br><span class="line"><span class="string">                请确保信息的准确性和实用性。&quot;&quot;&quot;</span>,</span><br><span class="line">    model=model,</span><br><span class="line">    tools=[search_tool],</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">)</span><br><span class="line"><span class="comment"># 做计划的 agent</span></span><br><span class="line">planner_agent = ChatAgent(</span><br><span class="line">    system_message=<span class="string">&quot;&quot;&quot;你是一个专业的旅行规划师。你的职责是:</span></span><br><span class="line"><span class="string">                1. 根据景点分布规划合理的游览顺序</span></span><br><span class="line"><span class="string">                2. 为每天安排适量的景点和活动</span></span><br><span class="line"><span class="string">                3. 考虑用餐、休息等时间</span></span><br><span class="line"><span class="string">                4. 注意不同季节的特点</span></span><br><span class="line"><span class="string">                请确保行程安排合理且具有可行性。&quot;&quot;&quot;</span>,</span><br><span class="line">    model=model,</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 评估攻略的agent</span></span><br><span class="line">reviewer_agent = ChatAgent(</span><br><span class="line">    system_message=<span class="string">&quot;&quot;&quot;你是一个经验丰富的旅行爱好者。你的职责是:</span></span><br><span class="line"><span class="string">        1. 从游客角度评估行程的合理性</span></span><br><span class="line"><span class="string">        2. 指出可能的问题和改进建议</span></span><br><span class="line"><span class="string">        3. 补充实用的旅行小贴士</span></span><br><span class="line"><span class="string">        4. 评估行程的性价比</span></span><br><span class="line"><span class="string">        请基于实际旅行经验给出中肯的建议。&quot;&quot;&quot;</span>,</span><br><span class="line">    model=model,</span><br><span class="line">    output_language=<span class="string">&quot;zh-cn&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加工作节点 可以链式调用，这里的描述一定要精准且易读，因为协调者就是根据这个描述来分发任务的</span></span><br><span class="line">workforce.add_single_agent_worker(</span><br><span class="line">    <span class="string">&quot;负责搜索目的地相关信息&quot;</span>, worker=search_agent</span><br><span class="line">).add_single_agent_worker(</span><br><span class="line">    <span class="string">&quot;负责制定详细行程规划&quot;</span>, worker=planner_agent</span><br><span class="line">).add_single_agent_worker(<span class="string">&quot;负责从游客角度评估行程&quot;</span>, worker=reviewer_agent)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 实例化一个task id 可以是任意字符串</span></span><br><span class="line">task = Task(</span><br><span class="line">    content=<span class="string">&quot;规划一下从北京周五晚上到青岛，周日晚上从青岛回北京，周末两天游玩青岛的行程安排&quot;</span>,</span><br><span class="line">    <span class="built_in">id</span>=<span class="string">&quot;0&quot;</span>,</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">nest_asyncio.apply()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 让 Workforce 处理这个任务</span></span><br><span class="line">task = workforce.process_task(task)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(task.result)</span><br></pre></td></tr></table></figure><p>输出内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">Worker node <span class="number">12932904944</span> (负责搜索目的地相关信息) get task <span class="number">0.0</span>: 搜索青岛的旅游景点、美食和住宿信息，并提供给负责制定详细行程规划的同事。&lt;ID&gt;: <span class="number">12932904944</span></span><br><span class="line">Warning: No results found. Check <span class="keyword">if</span> Baidu HTML structure has changed.</span><br><span class="line">======</span><br><span class="line">Reply <span class="keyword">from</span> Worker node <span class="number">12932904944</span> (负责搜索目的地相关信息):</span><br><span class="line"></span><br><span class="line">以下是关于青岛旅游的相关信息，供您参考以制定详细的行程规划：<span class="string">&quot;&gt;\\[青岛旅游景点\\n1. **[青岛旅游景点攻略_青岛打卡/必去景点大全/排名/推荐【携程攻略】](http://www.baidu.com/link?url=sXCy5mSbN8sDFc73MI1gzp4gKuoEA_iit4HV6_3idTZfPRDgaQID2AXnrNogkAxHA598QiWvsfc4Gsop0_JLH_)**\\n- 该链接提供了详尽的青岛旅游景点介绍，包括热门打卡地、必去景点以及游客评价和建议。\\n\\n### 青岛特色美食\\n- 对于青岛特色美食的信息搜索暂时没有返回具体结果。不过通常来说，青岛以其海鲜闻名，比如烧烤鱿鱼、海蛎煎饼等都是当地非常受欢迎的美食。此外，青岛啤酒也是不可错过的体验之一。建议进一步查询或访问当地的美食街和餐馆来获取更准确的信息。\\n\\n### 青岛住宿推荐\\n1. **[青岛住宿推荐!靠近栈桥,不想走](http://www.baidu.com/link?url=lqaFpZ4F9RBoojTcFQxCt_5NPyj-T09B8P91PPpG8fbH446XW4ilVtWoGSOQyBHpguLC9r9XiU0Z_axyMCKCV59s5QYtpYmv_vLYUPrp3o75-IPQM0oG3PIjTZ_Ris5L)**\\n- 这个链接提供了一些靠近著名景点如栈桥附近的住宿选择，方便出行游览。\\n2. **[青岛酒店预订,价格查询-青岛宾馆住宿信息-【携程旅行手机版】](http://www.baidu.com/link?url=zkuj6F8Ou34w6_YfVjeOqSR2M50XxEnwttx2pk4EvVhXV6GP2sBncpxF4YN3gVT9cEu9WuitmAsYUL1ff-O7Va)**\\n- 通过携程旅行平台可以查询并预订各类酒店，同时比较不同住宿的价格和服务，帮助找到最适合您的住处。\\n请根据这些信息进行下一步的详细安排。如果需要更多特定类型的信息或者有其他要求，请随时告知我。</span></span><br><span class="line"><span class="string">======Worker node 6245538816 (负责制定详细行程规划) get task 0.1: 根据收集到的信息，规划从北京周五晚上出发至青岛，周日晚上返回北京的具体行程安排，包括交通方式、游玩路线、餐饮及住宿等。&lt;ID&gt;: 6245538816</span></span><br><span class="line"><span class="string">======</span></span><br><span class="line"><span class="string">Reply from Worker node 6245538816 (负责制定详细行程规划):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 青岛周末游行程规划（周五晚上出发，周日晚上返回北京）\n**交通方式：**&quot;</span>&gt;\\[从北京到青岛可以选择高铁或飞机。建议选择高铁，因为高铁站通常位于城市中心，方便前往住宿地点。根据实际购票情况，选择适合的车次。\\\\n- **周五晚上：** 晚上乘坐高铁从北京出发，预计到达青岛的时间为晚上<span class="number">10</span>点左右。抵达后直接前往预订好的酒店休息。\\\\n- **周六：** \\\\n  - 上午：参观栈桥，这里是青岛的标志性景点之一，可以欣赏到美丽的海景和青岛的历史建筑。之后步行至小青岛公园继续游览。\\\\n  - 中午：在附近寻找一家海鲜餐厅享用午餐，品尝当地特色如烤鱿鱼、海蛎煎饼等。推荐尝试青岛啤酒。\\\\n  - 下午：前往八大关风景区，这里有许多欧式建筑和美丽的街道非常适合拍照留念。随后可前往第一海水浴场放松身心。\\\\n  - 晚餐：在市区内挑选一家评价较好的海鲜餐馆用餐。\\\\n- **周日：** \\\\n  - 上午：访问青岛啤酒博物馆了解青岛啤酒的历史文化，并有机会品尝新鲜酿造的啤酒。\\\\n  - 中午：在啤酒博物馆附近的餐厅享用午餐。\\\\n  - 下午：如果时间允许的话，可以去五四广场散步，感受城市的现代气息。之后准备返程事宜。\\\\n  - 晚上：乘高铁返回北京。\\\\n**餐饮及住宿建议：**<span class="string">&quot;&gt;\n- 住宿：推荐选择靠近栈桥或者八大关景区的酒店，便于出行。可以通过携程等平台提前预订。\\\\n- 美食：除了上述提到的海鲜外，还可以尝试其他地方风味小吃。记得多喝几杯正宗的青岛啤酒！</span></span><br><span class="line"><span class="string">======Worker node 6245540064 (负责从游客角度评估行程) get task 0.2: 从游客角度评估行程安排的合理性与吸引力，提出改进建议或确认行程安排是否合适。&lt;ID&gt;: 6245540064</span></span><br><span class="line"><span class="string">======</span></span><br><span class="line"><span class="string">Reply from Worker node 6245540064 (负责从游客角度评估行程):</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">从游客的角度来看，这个周末游青岛的行程安排是合理且具有吸引力的。交通方式选择高铁，方便快捷，尤其适合短途旅行。周五晚上出发，周日晚上返回北京，充分利用了周末时间。\\n周六的行程安排得当，包含了栈桥、小青岛公园等著名景点，以及八大关风景区和第一海水浴场，能够全面体验青岛的历史文化与自然风光。午餐和晚餐推荐品尝当地特色海鲜，这将为旅程增添更多乐趣。\\n周日参观青岛啤酒博物馆是一个很好的选择，让游客深入了解这座城市的文化背景。之后如果还有时间去五四广场散步也是不错的安排。\\n建议：\n1. 根据个人兴趣调整游览顺序或增加一些非主流但有趣的小众景点。\n2. 注意天气变化，提前查看目的地天气预报，以便适时调整户外活动计划。\n3. 预留足够的休息时间，避免行程过于紧凑导致疲劳。\n4. 尝试预订一些有特色的民宿来代替普通酒店，可能会给旅行带来不一样的体验。</span></span><br><span class="line"><span class="string">======根据提供的信息和建议，从北京周五晚上出发至青岛，并于周日晚上返回北京的周末游行程可以这样规划：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 交通</span></span><br><span class="line"><span class="string">- **前往**：周五晚上乘坐高铁从北京出发前往青岛，预计到达时间为晚上10点左右。选择高铁是因为其便捷性及通常位于市中心的位置。</span></span><br><span class="line"><span class="string">- **返回**：周日晚上同样通过高铁从青岛回到北京。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 住宿</span></span><br><span class="line"><span class="string">- 建议预订靠近主要景点如栈桥或八大关风景区附近的酒店，以方便出行。可以通过携程等在线平台提前预定合适的住处。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 行程安排</span></span><br><span class="line"><span class="string">- **周六**</span></span><br><span class="line"><span class="string">  - 上午：游览青岛标志性景点栈桥，随后步行至小青岛公园。</span></span><br><span class="line"><span class="string">  - 中午：在附近享用海鲜午餐，推荐尝试当地特色如烤鱿鱼、海蛎煎饼等，并品尝青岛啤酒。</span></span><br><span class="line"><span class="string">  - 下午：参观八大关风景区，欣赏欧式建筑；之后前往第一海水浴场放松身心。</span></span><br><span class="line"><span class="string">  - 晚餐：在市区内挑选一家评价较高的海鲜餐馆用餐。</span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">- **周日**</span></span><br><span class="line"><span class="string">  - 上午：访问青岛啤酒博物馆了解啤酒文化并品尝新鲜酿造的啤酒。</span></span><br><span class="line"><span class="string">  - 中午：在啤酒博物馆周边享受午餐。</span></span><br><span class="line"><span class="string">  - 下午（如果时间允许）：漫步五四广场，感受现代都市氛围。</span></span><br><span class="line"><span class="string">  - 准备返程。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 额外建议</span></span><br><span class="line"><span class="string">- 考虑到个人兴趣，可适当调整行程中景点的选择或顺序。</span></span><br><span class="line"><span class="string">- 关注天气预报，适时调整户外活动计划。</span></span><br><span class="line"><span class="string">- 确保行程中有足够的休息时间，避免过度劳累。</span></span><br><span class="line"><span class="string">- 可以考虑入住具有特色的民宿来增加旅行的独特体验。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">这个行程结合了青岛的历史文化与自然美景，同时也不失为一次美食之旅。希望这些建议能帮助您度过一个愉快而充实的周末！</span></span><br></pre></td></tr></table></figure></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>var options;"undefined"!=typeof lightGallery&&(options={selector:".gallery-item"},lightGallery(document.getElementsByClassName(".article-gallery")[0],options))</script></div></article><div class="blog-post-comments"><div id="disqus_thread"><noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript></div></div><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">首页</a></li><li><a href="/archives/">文章</a></li><li><a href="/categories/">分类</a></li><li><a href="/search/">搜索</a></li><li><a href="/about/">关于</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-CAMEL-AI-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">1. CAMEL-AI 介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-Agent-%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%8F%8A%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">2. Agent 基础组件及使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-Models"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 Models</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-Message"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 Message</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-Prompt"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 Prompt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-Memory"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 Memory</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-Tool"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 Tool</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-1-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1 自定义工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-2-%E9%A2%84%E8%AE%BE%E5%B7%A5%E5%85%B7"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2 预设工具</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E7%BB%BC%E5%90%88%E4%BD%BF%E7%94%A8"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 综合使用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="toc-number">3.</span> <span class="toc-text">3. 核心特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-RolePlaying"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 RolePlaying</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-Workforce"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Workforce</span></a></li></ol></li></ol></div><div id="share-footer" style="display:none"><ul><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.facebook.com/sharer.php?u=https://www.powercheng.fun/articles/b282b723/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://twitter.com/share?url=https://www.powercheng.fun/articles/b282b723/&text=CAMEL-AI 使用笔记"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.linkedin.com/shareArticle?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://pinterest.com/pin/create/bookmarklet/?url=https://www.powercheng.fun/articles/b282b723/&is_video=false&description=CAMEL-AI 使用笔记"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=CAMEL-AI 使用笔记&body=Check out this article: https://www.powercheng.fun/articles/b282b723/" rel="external nofollow noreferrer"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://getpocket.com/save?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://reddit.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://www.stumbleupon.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="http://digg.com/submit?url=https://www.powercheng.fun/articles/b282b723/&title=CAMEL-AI 使用笔记"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" href="http://www.tumblr.com/share/link?url=https://www.powercheng.fun/articles/b282b723/&name=CAMEL-AI 使用笔记&description=&lt;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&#34; /&gt;&lt;div class=&#34;.article-gallery&#34;&gt;&lt;p&gt;由于官方文档过于简洁，所以记一下 CAMEL-AI 多智能体框架使用笔记，包括基础 Agent 使用（Prompt、Message、Memory、Tool），role-playing（角色扮演）使用、Workforce（多智能体协作）使用、RAG&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" target="_blank" rel="noopener external nofollow noreferrer" href="https://news.ycombinator.com/submitlink?u=https://www.powercheng.fun/articles/b282b723/&t=CAMEL-AI 使用笔记"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> 菜单</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> 目录</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2021-2025 Caiden Hou</div><div class="footer-right"><nav><ul><li><a href="/">首页</a></li><li><a href="/archives/">文章</a></li><li><a href="/categories/">分类</a></li><li><a href="/search/">搜索</a></li><li><a href="/about/">关于</a></li></ul></nav></div></footer></div><link rel="preload" href="/lib/font-awesome/css/all.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"></noscript><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">$(function(){$(".highlight table").before('<span class="btn-copy tooltipped tooltipped-sw" aria-label="复制到粘贴板！"><i class="fa-regular fa-clone"></i></span>'),new ClipboardJS(".btn-copy",{text:function(e){return Array.from(e.nextElementSibling.querySelectorAll(".code")).reduce((e,t)=>e+t.innerText+"\n","")}}).on("success",function(e){e.trigger.setAttribute("aria-label","复制成功！"),e.clearSelection()})})</script><script src="/js/main.js"></script><script type="text/javascript">var disqus_shortname="caidens-blog";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script></body></html>